<div class="layout">
  <div class="content-area">
    <div class="header">AccountingTutor.org</div>
    <div class="transaction-input">
      <label for="transaction">Transaction : </label>
      <input
        type="text"
        name="transaction"
        id="transaction"
        [(ngModel)]="transaction"
        (input)="showError = false; errorMessage = ''; transaction =='' ? showError = true: showError=false"
      />
    </div>
    <div class="line"></div>
    <h3>Transaction Details:</h3>
    <table class="table table-bordered">
      <tr>
        <th scope="col" class="border-right border border-primary">
          Account Name
        </th>
        <th scope="col" class="border-right border border-primary">Type</th>
        <th scope="col" class="border-right border border-primary">
          Increase or Decrease
        </th>
        <th scope="col" class="border-right border border-primary">Amount</th>
        <th scope="col" class="border-left border-primary">Debit/Credit</th>
        <th scope="col" class="border-right border-primary"></th>
      </tr>
      <tr *ngFor="let row of rows; index as i">
        <td>
          <select
            (change)="accountChanges(i)"
            [(ngModel)]="row.selectedAccount"
          >
            <option *ngFor="let account of row.names" [ngValue]="account">
              {{ account }}
            </option>
          </select>
        </td>
        <td>
          {{ row.selectedType }}
        </td>
        <td>
          <select
            (change)="increaseDecreaseChange(i)"
            [(ngModel)]="row.selectedIncreaseDecrease"
          >
            <option
              *ngFor="let increaseDecrease of row.increaseDecrease"
              [ngValue]="increaseDecrease"
            >
              {{ increaseDecrease }}
            </option>
          </select>
        </td>
        <td>
          <input
            type="text"
            [(ngModel)]="row.amount"
            (change)="onAmountChange(i)"
            (input)="showError = false; errorMessage = '';"
          />
        </td>
        <td>{{ row.debitCredit }}</td>
        <td>
          <button (click)="removeRow(i)">X</button>
        </td>
      </tr>
    </table>
    <div class="row">
      <button class="col-2" [disabled]="showError" (click)="submit()">
        Submit
      </button>
      <div class="col-8 text-center text-danger">
        <span *ngIf="showError"> {{ errorMessage }}</span>
      </div>
      <button (click)="addRow()" class="col-2">Add Row</button>
    </div>
    <br />
    <table *ngIf="showGrid" class="table table-bordered">
      <tr>
        <th
          class="border-right border border-primary"
          *ngFor="let row of columns; index as i"
        >
          {{ row }}
        </th>
      </tr>
      <tr *ngFor="let row of gridRows; index as k">
        <td *ngFor="let y of columns; index as i">
          {{ getAccountNameIndexAndValue(row, y) }}
        </td>
      </tr>
      <tr>
        <td *ngFor="let y of columns; index as i">
          {{ getTotalValue(total, i, y) }}
        </td>
      </tr>
    </table>
    <br />
    <!-- <h3 *ngIf="showGrid">Total :</h3>
    <br />
    <table *ngIf="showGrid" class="table table-bordered">
      <tr>
        <th
          class="border-right border border-success"
          *ngFor="let row of columns; index as i"
        >
          {{ totalHeader(row, i) }}
        </th>
      </tr>
      <tr>
        <td *ngFor="let y of columns; index as i">
          {{ getTotalValue(total, i, y) }}
        </td>
      </tr>
    </table> -->
  </div>
  <div class="graphContainer">

    <!-- <h3>Balance Sheet</h3> -->
    <div class="balance-sheet">
      <div style="display: block">
        <canvas
          baseChart
          [datasets]="barChartDataAssets"
          [labels]="barChartLabelsAssets"
          [options]="barChartOptionsAssets"
          [legend]="barChartLegendAssets"
          style="height: 400px; width: 300px; margin-left: 20px;"
        >
        </canvas>
      </div>
    </div>
    <!-- <div class="balance-sheet">
      <div style="display: block">
        <canvas
          baseChart
          [datasets]="barChartDataLiability"
          [labels]="barChartLabelsLiability"
          [options]="barChartOptionsLiability"
          [legend]="barChartLegendLiability"
          style="height: 400px; width: 150px"
        >
        </canvas>
      </div>
    </div> -->

    <div class="balance-sheet">
      <div style="display: block">
        <canvas
          baseChart
          [datasets]="barChartDataRevenue"
          [labels]="barChartLabelsRevenue"
          [options]="barChartOptionsRevenue"
          [legend]="barChartLegendRevenue"
          style="height: 400px; width: 300px; margin-left: 20px;"
        >
        </canvas>
      </div>
    </div>

    <!-- <div class="balance-sheet">
      <div style="display: block">
        <canvas
          baseChart
          [datasets]="barChartDataExpenses"
          [labels]="barChartLabelsExpenses"
          [options]="barChartOptionsExpenses"
          [legend]="barChartLegendExpenses"
          style="height: 400px; width: 150px"
        >
        </canvas>
      </div>
    </div> -->

  </div>
</div>
